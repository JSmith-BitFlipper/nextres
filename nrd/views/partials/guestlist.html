{{#unless user.firstName}}
<div class="todo">Please update your <em>residence info</em>. Your guestlist will not work unless your information is valid.</div>
{{/unless}}
<h1>View/Edit Your Guestlist</h1>
<p>Guests must be MIT students. For more details about the Guestlist policy, please check the <a href="http://studentlife.mit.edu/studentlife.mit.edu/reslifeanddining/news/residencehallsecurity">MIT security policies</a></p>
<form action='guestlist' method='post'>
<p>
<table>
  <tr>
    <th>Full Name</th><th>Kerberos</th>
  </tr>
  {{#each guests.guests}}
  <tr>
      <td><input type='text' name='guest{{this.index}}Name' value='{{this.name}}' /></td>
      <td><input type='text' name='guest{{this.index}}Kerberos' value='{{this.kerberos}}' /></td>
  </tr>
  {{/each}}
</table>
</p>
{{#if guests.hasTempGuests}}
{{else}}
<span id="temp-guest-closed">
  <p><a id="temp-guest-add" href="#">Add temporary guests</a></p>
</span>
{{/if}}
<span id="temp-guest-open" style="display:none;">
  <p>Temporary guests (resets every morning at 7AM)</p>
  <p>
  <table>
    <tr>
      <th>Full Name</th><th>Kerberos</th>
    </tr>
    {{#each guests.tempGuests}}
    <tr>
      <td><input type='text' name='guest{{this.index}}Name' value='{{this.name}}' /></td>
      <td><input type='text' name='guest{{this.index}}Kerberos' value='{{this.kerberos}}' /></td>
    </tr>
    {{/each}}
  </table>
  </p>
</span>
<p>
<input type='submit' value='Save'>
</p>
</form>
<script type="text/javascript">
  $(document).ready(function() {
{{#if guests.hasTempGuests}}
    $('#temp-guest-open').show();
{{else}}
    $('#temp-guest-add').on('click', function() {
      $('#temp-guest-closed').hide();
      $('#temp-guest-open').slideDown(500);
    });
{{/if}}
  });
</script>
