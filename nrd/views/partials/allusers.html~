{{#if error}}
  <div class="error-msg">{{error}}</div>
{{/if}}
<h1>All Residents</h1>
<p>Fuck, this page is ugly. Fuck you Antonio. Don't look. I'm not done. </p>
<p>
	Mass Add: One kerberos per line
	<form method="post" action="allusers">
	<textarea name="massadd"></textarea>
	<input type="submit" value="Create">
	</form>
	<hr size="1" />
</p>
<!--
<p>
	<form method="post" action="signup">
		<p>Add Single User: <input type="text" name="kerberos"></p>
		<input type="submit">
	</form>
</p>
-->
<p>Fuck pagination, what even is a stonehenge.</p>
<p>
  <table class="displaytable">
    <tr>
      <th>Kerberos</th>
      <th width="240">Resident Name</th>
      <th>Room</th>
      <th>Role</th>
      <th>Remove</th>
    </tr>
    {{#each result}}
	<tr id="{{this.kerberos}}-tr">
	  <td>{{this.kerberos}}</td>
	  <td>{{this.firstName}} {{this.lastName}}</td>
	  <td>{{this.roomNumber}}</td>
	  <td>{{this.name}}</td>
	  <td><a id="{{this.kerberos}}-remove" class="remove">X</a></td>
	</tr>
  	{{/each}}
  </table>
</p>

<script type="text/javascript">
  $('.remove').on('click', function(e) {
    var yes = $('<a>').html('yes').on('click',
      function(e2) {
        kerberos = e.target.id;
        kerberos = kerberos.substring(0,kerberos.length-'-remove'.length);
        $.ajax('/remove',{data:{kerberos:kerberos}, type:"POST"});
        $('#'+kerberos+'-tr').remove();
      }
    );
    var no = $('<a>').html('no').on('click',
      function(e2) { $(e.target).html('X'); }
    );
    $(e.target).html(yes).append('&nbsp;&nbsp;').append(no);
  });
</script>

{{results}}
